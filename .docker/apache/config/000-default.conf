<VirtualHost *:8080>
	ServerName localhost

	DocumentRoot /var/www/html/public
	DirectoryIndex /index.php

	<Directory /var/www/html/public>
		 AllowOverride None
		 Order Allow,Deny
		 Allow from All
		 SetEnv APP_ENV ${APP_ENV}
		 SetEnv APP_DEBUG ${APP_DEBUG}
		 SetEnv SCW_HOST ${SCW_HOST}
         SetEnv SCW_ACCESS_KEY ${SCW_ACCESS_KEY}
         SetEnv SCW_REGION ${SCW_REGION}
         SetEnv SCW_BUCKET ${SCW_BUCKET}
         SetEnv SCW_SECRET_KEY ${SCW_SECRET_KEY}
         SetEnv SCW_DEFAULT_ORGANIZATION_ID ${SCW_DEFAULT_ORGANIZATION_ID}
         SetEnv SCW_DEFAULT_PROJECT_ID ${SCW_DEFAULT_PROJECT_ID}
         SetEnv APP_ENV ${APP_ENV}
         SetEnv APP_DEBUG ${APP_DEBUG}
         SetEnv APP_SECRET ${APP_SECRET}
         SetEnv DATABASE_URL ${DATABASE_URL}
         SetEnv BASE_URL ${BASE_URL}
         SetEnv SENTRY_DSN ${SENTRY_DSN}
         SetEnv MAILER_FROM ${MAILER_FROM}
         SetEnv MAILER_DSN ${MAILER_DSN}
         SetEnv ADMIN_PASSWORD ${ADMIN_PASSWORD}
         SetEnv ADMIN_PASSWORD_VALIDITY_IN_MONTH ${ADMIN_PASSWORD_VALIDITY_IN_MONTH}
         SetEnv CORS_ALLOW_ORIGIN ${CORS_ALLOW_ORIGIN}
         SetEnv EMAIL_FROM ${EMAIL_FROM}
         SetEnv EMAIL_FROM_LABEL ${EMAIL_FROM_LABEL}
         SetEnv VERSION_LABEL ${VERSION_LABEL}

		 <IfModule mod_rewrite.c>
           Options -MultiViews
           RewriteEngine On
           RewriteCond %{REQUEST_FILENAME} !-f
           RewriteRule ^(.*)$ index.php [QSA,L]
         </IfModule>

		 FallbackResource /index.php
    </Directory>

	<Directory /var/www/html/public/build>
        DirectoryIndex disabled
        FallbackResource disabled
    </Directory>

    <Directory /var/www/html/public/bundles>
        DirectoryIndex disabled
        FallbackResource disabled
    </Directory>

    SetEnvIf Authorization "(.*)" HTTP_AUTHORIZATION=$1

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
